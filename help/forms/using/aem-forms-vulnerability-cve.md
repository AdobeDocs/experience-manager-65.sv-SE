---
title: Minska Log4j2-sårbarheter för Experience Manager Forms
description: Minska Log4j2-sårbarheter för Experience Manager Forms
content-type: reference
products: SG_EXPERIENCEMANAGER/6.5/FORMS
topic-tags: Security
geptopics: SG_AEMFORMS/categories/jee
role: Admin
solution: Experience Manager, Experience Manager Forms
feature: Adaptive Forms
source-git-commit: c9d9a4d83a00587ee7b223e328abdef1bdd7438b
workflow-type: tm+mt
source-wordcount: '720'
ht-degree: 0%

---

# Minska Log4j2-sårbarheter för Experience Manager Forms

## Problem

Allvarliga säkerhetsluckor har rapporterats för Apache Log4j2, ett populärt loggningsbibliotek för Java-baserade program. Följande säkerhetsluckor har analyserats:

<table border="1">
  <tr>
    <th>Sårbarhet</th>
    <th>Vad som påverkas</th>
    <th>Vad påverkas inte?</th>
    <th>Status</th>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-44228">CVE-2021-44228</a></td>
    <td rowspan="2">
      <ul>
        <li>Experience Manager 6.5 Forms på JEE (alla versioner från 6.5 GA till 6.5.11)</li>
        <li>Experience Manager 6.4 Forms på JEE (alla versioner från 6.4 GA till 6.4.8)</li>
        <li>Experience Manager 6.3 Forms på JEE (alla versioner från 6.3 GA till 6.3.3)</li>
        <li>Experience Manager 6.5 Forms Designer</li>
        <li>Experience Manager 6.4 Forms Designer</li>
        <li>Automatisk formulärkonverteringstjänst</li>
      </ul>
    </td>
    <td rowspan="2">
      <ul>
        <li>Experience Manager Forms Workbench (alla versioner)</li>
        <li>Experience Manager Forms on OSGi (alla versioner)</li>
      </ul>
    </td>
    <td rowspan="2">
      De här har åtgärdats. I avsnittet <strong>Upplösning</strong> finns information om korrigeringar och åtgärder för att begränsa användningen.
    </td>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-45046">CVE-2021-45046</a></td>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-45105">CVE-2021-45105</a></td>
    <td rowspan="9" colspan="2">
      Ingen påverkan på Experience Manager Forms-releaser för färdiga loggningskonfigurationer. Om du har ytterligare loggningskonfigurationer bör du kontrollera dessa konfigurationer för att se om det finns några säkerhetsluckor.
    </td>
  </tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-44832">CVE-2021-44832</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-4104">CVE-2021-4104</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-22963">CVE-2022-22963</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-22965">CVE-2022-22965</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-9488">CVE-2020-9488</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-23302">CVE-2022-23307</a></td><td></td></tr>
</table>

>[!NOTE]
> 
> AEM 6.5.13.0 Forms och tidigare versioner innehåller både Log4j-bibliotek (1.x och 2.17.1). AEM Forms Log4j 1.x-biblioteken i AEM 6.5.13.0 Forms och tidigare versioner ingår inte i den rapporterade sårbarheten och anses heller inte vara sårbara i AEM Forms kodsökningar som utförs av Adobe. Alla Log4j 1.x-bibliotek tas dock bort i version 6.5.14. Anvisningar om hur du installerar AEM 6.5.14.0 eller en senare version finns i [versionsinformation](https://experienceleague.adobe.com/sv/docs/experience-manager-65/content/release-notes/release-notes).

## Upplösning

Du kan använda någon av följande metoder för att minska risken för denna sårbarhet:

* Installera det senaste Service Pack-meddelandet
* Använd manuella begränsningssteg

**Installera den senaste Service Pack-versionen**

>[!CAUTION]
> 
> Om du har implementerat en snabbkorrigering i Experience Manager Forms Service Pack 6.3.3.8 eller Experience Manager Forms Service Pack 6.4.8.4 ska du inte installera Service Pack med de säkerhetskorrigeringar som anges nedan. Om du installerar dessa Service Pack kan snabbkorrigeringen skrivas över. Adobe rekommenderar att du använder **manuella begränsningssteg** i ett sådant scenario.

<table border="1" cellpadding="8" cellspacing="0">
  <thead>
    <tr>
      <th>Frigör</th>
      <th>Version</th>
      <th>Hämta länk/användaråtgärd</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Experience Manager 6.5 Forms on JEE</td>
      <td>AEMForms-6.5.0-0038 (log4jv2.16)</td>
      <td rowspan="5">Hämta från <a href="https://auth.services.adobe.com/en_US/index.html?callback=https%3A%2F%2Fims-na1.adobelogin.com%2Fims%2Fadobeid%2Fexc_app%2FAdobeID%2Ftoken%3Fredirect_uri%3Dhttps%253A%252F%252Fexperience.adobe.com%252F%2523old_hash%253Dold_hash%253D%252523%25252Fdownloads%2526from_ims%253Dtrue%253Fclient_id%253Dexc_app%2526api%253Dauthorize%2526scope%253Dab.manage%252Caccount_cluster.read%252Cadditional_info%252Cadditional_info.job_function%252Cadditional_info.projectedProductContext%252Cadditional_info.roles%252CAdobeID%252Cadobeio.appregistry.read%252Cadobeio_api%252Caudiencemanager_api%252Ccreative_cloud%252Cmps%252Copenid%252Corg.read%252Cpps.read%252Cread_organizations%252Cread_pc%252Cread_pc.acp%252Cread_pc.dma_tartan%252Csession%26state%3D%257B%2522jslibver%2522%253A%2522v2-v0.31.0-2-g1e8a8a8%2522%252C%2522nonce%2522%253A%25223811059492261787%2522%257D%26code_challenge_method%3Dplain%26use_ms_for_expiry%3Dtrue&client_id=exc_app&scope=ab.manage%2Caccount_cluster.read%2Cadditional_info%2Cadditional_info.job_function%2Cadditional_info.projectedProductContext%2Cadditional_info.roles%2CAdobeID%2Cadobeio.appregistry.read%2Cadobeio_api%2Caudiencemanager_api%2Ccreative_cloud%2Cmps%2Copenid%2Corg.read%2Cpps.read%2Cread_organizations%2Cread_pc%2Cread_pc.acp%2Cread_pc.dma_tartan%2Csession&state=%7B%22jslibver%22%3A%22v2-v0.31.0-2-g1e8a8a8%22%2C%22nonce%22%3A%223811059492261787%22%7D&relay=2cf36844-ac87-4b40-a6fe-9a06cd0a01b8&locale=en_US&flow_type=token&dctx_id=v%3A2%2Cs%2Cf%2Cb8e64530-b013-11ee-a6c1-e721bdec0171&idp_flow_type=login&response_type=token&profile_filter=%7B%22findFirst%22%3Atrue%2C+%22fallbackToAA%22%3Atrue%2C+%22preferForwardProfile%22%3Atrue%2C+%22searchEntireCluster%22%3Afalse%7D%3B+hasPC%28%22dma_tartan%22%29&code_challenge_method=plain&redirect_uri=https%3A%2F%2Fexperience.adobe.com%2F%23old_hash%3Dold_hash%3D%2523%252Fdownloads%26from_ims%3Dtrue%3Fclient_id%3Dexc_app%26api%3Dauthorize%26scope%3Dab.manage%2Caccount_cluster.read%2Cadditional_info%2Cadditional_info.job_function%2Cadditional_info.projectedProductContext%2Cadditional_info.roles%2CAdobeID%2Cadobeio.appregistry.read%2Cadobeio_api%2Caudiencemanager_api%2Ccreative_cloud%2Cmps%2Copenid%2Corg.read%2Cpps.read%2Cread_organizations%2Cread_pc%2Cread_pc.acp%2Cread_pc.dma_tartan%2Csession&use_ms_for_expiry=true#/">Programvarudistribution</a>.</td>
    </tr>
    <tr>
      <td>Experience Manager 6.4 Forms i JEE</td>
      <td>AEMForms-6.4.0-0027</td>
    </tr>
    <tr>
      <td>Experience Manager 6.3 Forms on JEE</td>
      <td>AEMForms-6.3.0-0047</td>
    </tr>
    <tr>
      <td>Experience Manager 6.5 Forms Designer</td>
      <td>AEM Forms Designer v650.019</td>
    </tr>
    <tr>
      <td>Experience Manager 6.4 Forms Designer</td>
      <td>AEM Forms Designer v640.012</td>
    </tr>
    <tr>
      <td>Automatisk formulärkonverteringstjänst</td>
      <td>Begränsningsstegen identifierades och tjänsten lagrades.</td>
      <td>Det finns ingen användaråtgärd.</td>
    </tr>
  </tbody>
</table>

## Använd manuella begränsningssteg

För att åtgärda problemet utför du följande steg för Experience Manager 6.5 Forms (log4j-core version 2.10 och senare), Experience Manager 6.4 Forms (log4j-core version tidigare än 2.10) och Experience Manager 6.3 Forms (log4j-core version tidigare än 2.10):

1. Stäng alla serverinstanser och sökare.

1. Ta bort `org/apache/logging/log4j/core/lookup/JndiLookup.class` från sårbara `log4j-core-2.xx.jar` som finns på följande platser:

   * **Distribuerbart EAR:**

   ```javascript
   <FORMS_INSTALLATION_DIRECTORY>/configurationManager/export/adobe-livecycle-[jboss|weblogic|websphere].ear
   ```

   * **GemFire eller Geode-positionerare:**

   ```javascript
   <FORMS_INSTALLATION_DIRECTORY>/lib/caching/lib
   ```

   Om du vill uppdatera distribuerbar EAR, beroende på operativsystemet, kan du använda någon av följande metoder för att ta bort `JndiLookup.class` från sårbarheten `log4j-core-2.xx.jar`:

   * (Linux med Oracle WebLogic eller Redhat JBoss): Kör följande kommando. Uppdatera informationen för `version` och programservern innan du kör dessa kommandon:

   ```javascript
   unzip adobe-livecycle-<weblogic|jboss>.ear lib/log4j-core-<version>.jar
   ```

   ```javascript
   zip -d lib/log4j-core-xxx.jar org/apache/logging/log4j/core/lookup/JndiLookup.  class
   ```

   ```javascript
   zip -ru adobe-livecycle-jboss.ear lib/log4j-core-<version>.jar
   ```

   * (Linux med IBM WebSphere): Kör följande kommando. Uppdatera informationen för `version` och programservern innan du kör dessa kommandon:

   ```javascript
   unzip adobe-livecycle-websphere.ear log4j-core-<version>.jar
   ```

   ```javascript
   zip -d log4j-core-xxx.jar org/apache/logging/log4j/core/lookup/JndiLookup.class
   ```

   * (Microsoft Windows): Använd ett GUI-verktyg som [7-Zip](https://www.7-zip.org/) för att ta bort klassfilen.
1. Upprepa steg 2 för varje programserverinstans (nod) och alla positionerare (om det finns fler än en).

1. När du har uppdaterat behållaren distribuerar du om den ändrade EAR-versionen och startar om alla lokaliseringsprocesser och serverinstanser.

>[!NOTE]
> 
> * Ersätt originalkopian av log4j-core-2.xx jar med den uppdaterade kopian. Inga andra ändringar krävs.
> * När konfigurationshanteraren körs igen kan innehållet i `<FORMS_INSTALLATION_DIRECTORY/configurationManager/export` skrivas över.   Uppdatera behållaren i `<FORMS_INSTALLATION_DIRECTORY>/deploy/adobe-core-[jboss|weblogic|websphere].ear` för att undvika att göra om ovanstående ändring varje gång detta inträffar. Detta garanterar att `adobe-livecycle-[jboss|weblogic|websphere].ear` som skapats av konfigurationshanteraren redan har uppdaterat `log4j-core-2.xx jar`.
> * Manuella ändringar av driftsättningsbara artefakter kan skrivas över vid patchning/uppgradering. Om detta händer ska du tillämpa proceduren igen.

## Referenser

[https://logging.apache.org/log4j/2.x/security.html](https://logging.apache.org/security.html)

**Vem ska jag kontakta om jag har ytterligare frågor eller några problem med att utföra åtgärder för att minska riskerna?**

Du kan kontakta [Adobe Support](https://experienceleague.adobe.com/sv?lang=en&support-solution=Experience+Manager#support) eller skaffa en [supportanmälan](https://experienceleague.adobe.com/sv/docs/customer-one/using/home#submit-ticket).

**Vem ska jag kontakta om jag har ytterligare frågor eller problem med att utföra åtgärder för att begränsa?**
[&#x200B; Juridiska meddelanden &#x200B;](https://helpx.adobe.com/se/legal/legal-notices.html)    |    [Integritetspolicy online](https://www.adobe.com/privacy.html)